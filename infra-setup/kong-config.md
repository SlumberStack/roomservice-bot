# Kong Gateway configuration

## Add services to the Gateway

```bash
  curl -i -X POST   --url http://localhost:8001/services/   \
    --data 'name=example-service' \
    --data 'url=http://mockbin.org'

  curl -i -X POST   --url http://localhost:8001/services/example-service/routes \
    --data 'hosts[]=example.com'

  curl -i -X GET   --url http://localhost:8000/   \
    --header 'Host: example.com'
```

## Configure OAuth/2 plugin
```bash
curl -X POST http://localhost:8001/services/example-service/plugins \
    --data "name=oauth2"  \
    --data "config.scopes=email" \
    --data "config.scopes=phone" \
    --data "config.scopes=address" \
    --data "config.mandatory_scope=true" \
    --data "config.provision_key=<autogenerated>" \
    --data "config.token_expiration=7200" \
    --data "config.enable_authorization_code=true" \
    --data "config.enable_client_credentials=false" \
    --data "config.enable_implicit_grant=false" \
    --data "config.enable_password_grant=false" \
    --data "config.global_credentials=false" \
    --data "config.refresh_token_ttl=1209600" \
    --data "config.reuse_refresh_token=false" \
    --data "config.persistent_refresh_token=false"

```

## Verify plugin
```bash

curl -i -X GET \
 --url http://localhost:8000/ \
 --header 'Host: example.com'
```
